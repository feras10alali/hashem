import{t as v,a as c}from"../chunks/B0zkCgEv.js";import"../chunks/DFa-lXe0.js";import{p as et,f as at,a as st,b as o,g as l,m as rt,s as j,c as i,r,n as ot,t as M,d as it}from"../chunks/BW8aTVaI.js";import{s as h}from"../chunks/CgQJbJ8q.js";import{i as w}from"../chunks/Bd_8zUmT.js";import{p as lt,a as nt,e as dt,i as ct,s as O}from"../chunks/DLdXT8ZV.js";import{s as vt}from"../chunks/B-HKzecM.js";import{l as pt,t as mt,s as ut,c as ft}from"../chunks/GjyCz3r7.js";import{e as u}from"../chunks/B6Pj8jan.js";import{i as bt}from"../chunks/BcrJJAe6.js";import{s as gt,a as T}from"../chunks/D-BB90hW.js";import{o as ht,w as xt}from"../chunks/D4BJqEd1.js";var _t=v('<div class="fixed inset-0 bg-black/30 z-40"><div class="fixed top-0 right-0 h-full w-64 bg-white text-black shadow-lg z-50 p-4 flex flex-col justify-between"><div><div class="flex justify-between items-center mb-4"><h2 class="text-lg font-bold">الصفحات</h2> <button class="text-black text-xl">×</button></div> <nav class="flex flex-col gap-2"><span class="text-gray-400 cursor-not-allowed">الردود</span> <a href="/admin/approved_responses" class="hover:underline">الردود المقبولة</a> <a href="/admin/add_admin" class="hover:underline">اضافة مسؤول</a></nav></div> <button type="submit" class="bg-red-600 hover:bg-red-700 active:bg-red-800 text-white px-4 py-2 rounded-lg mt-4 w-full">تسجيل الخروج</button></div></div>'),wt=v('<p class="text-center text-gray-500">لا توجد ردود بعد.</p>'),yt=v('<p><strong>الموقع:</strong> <a target="_blank" class="text-blue-600 underline hover:text-blue-800"> </a></p>'),$t=v('<li class="bg-white border border-gray-200 rounded-xl shadow p-5"><p class="mb-1"><strong>الاسم:</strong> </p> <p class="mb-1"><strong>رقم الهاتف:</strong> </p> <!> <div class="mt-4 flex gap-3"><button class="bg-green-600 text-white px-4 py-2 rounded-md shadow hover:bg-green-700 transition">قبول</button> <button class="bg-red-600 text-white px-4 py-2 rounded-md shadow hover:bg-red-700 transition">رفض</button></div></li>'),kt=v('<ul class="space-y-5 max-w-3xl mx-auto px-4"></ul>'),jt=v('<div class="fixed bottom-4 right-4 z-50"><div role="alert"><svg class="shrink-0 w-4 h-4 me-3" fill="currentColor" viewBox="0 0 20 20"><path d="M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"></path></svg> <div><span class="font-medium"> </span> </div></div></div>'),Mt=v('<button class="text-black px-0 py-0 rounded mr-4 text-3xl">☰</button> <!> <h1 class="text-3xl font-bold text-center my-8">جميع الردود</h1> <!> <!>',1);function Dt(B,D){et(D,!1);const[y,J]=gt(),L=()=>T(lt,"$page",y),z=()=>T($,"$responses",y),f=()=>T(nt,"$alert",y);let x=rt(!1);function N(t,{duration:e=300}){return{duration:e,easing:ft,css:s=>`transform: translateX(${(1-s)*100}%);`}}function P(t){t.target===t.currentTarget&&j(x,!1)}const $=xt([]);ht(()=>{$.set(L().data.responses)});const X=t=>{$.update(e=>e.filter(s=>s.id!==t))},A=async(t,e)=>{try{const s=await fetch("/admin/responses",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({responseId:t,action:e})}),a=await s.json();s.ok?(X(t),O(a.message,"success")):O(a.error,"error")}catch(s){console.error(s),O("حدث خطأ أثناء العملية","error")}};bt();var C=Mt(),Z=at(C),q=o(Z,2);{var E=t=>{var e=_t(),s=i(e),a=i(s),n=i(a),d=o(i(n),2);r(n),ot(2),r(a);var b=o(a,2);r(s),r(e),u("click",d,()=>j(x,!1)),u("click",b,function(...g){var _;(_=pt)==null||_.apply(this,g)}),mt(3,s,()=>N),u("click",e,P),c(t,e)};w(q,t=>{l(x)&&t(E)})}var F=o(q,4);{var G=t=>{var e=wt();c(t,e)},K=t=>{var e=kt();dt(e,5,z,ct,(s,a)=>{var n=$t(),d=i(n),b=o(i(d));r(d);var g=o(d,2),_=o(i(g));r(g);var H=o(g,2);{var V=k=>{var p=yt(),m=o(i(p),2),Y=i(m);r(m),r(p),M((I,tt)=>{vt(m,"href",`https://www.google.com/maps?q=${l(a).home.lat},${l(a).home.lon}`),h(Y,`${I??""}, ${tt??""}`)},[()=>l(a).home.lat.toFixed(6),()=>l(a).home.lon.toFixed(6)],it),c(k,p)};w(H,k=>{var p,m;(p=l(a).home)!=null&&p.lat&&((m=l(a).home)!=null&&m.lon)&&k(V)})}var R=o(H,2),S=i(R),W=o(S,2);r(R),r(n),M(()=>{h(b,` ${l(a).name??""}`),h(_,` ${l(a).phonenumber??""}`)}),u("click",S,()=>A(l(a).id,"approve")),u("click",W,()=>A(l(a).id,"deny")),c(s,n)}),r(e),c(t,e)};w(F,t=>{z().length===0?t(G):t(K,!1)})}var Q=o(F,2);{var U=t=>{var e=jt(),s=i(e),a=o(i(s),2),n=i(a),d=i(n,!0);r(n);var b=o(n);r(a),r(s),r(e),M(()=>{ut(s,1,`flex items-center p-4 text-sm rounded-lg shadow ${f().type==="success"?"text-green-800 bg-green-100":f().type==="error"?"text-red-800 bg-red-100":"text-blue-800 bg-blue-100"}`),h(d,f().type==="success"?"نجاح!":"خطأ!"),h(b,` ${f().message??""}`)}),c(t,e)};w(Q,t=>{f().visible&&t(U)})}u("click",Z,()=>j(x,!0)),c(B,C),st(),J()}export{Dt as component};
