import{t as v,a as d}from"../chunks/B0zkCgEv.js";import"../chunks/DFa-lXe0.js";import{p as tt,f as at,a as et,b as l,g as n,m as rt,s as j,c as o,r as s,n as st,t as M,d as ot}from"../chunks/BW8aTVaI.js";import{s as g}from"../chunks/CgQJbJ8q.js";import{i as w}from"../chunks/Bd_8zUmT.js";import{p as lt,a as it,e as nt,i as ct,s as O}from"../chunks/DLdXT8ZV.js";import{s as dt}from"../chunks/B-HKzecM.js";import{l as vt,t as pt,s as mt,c as ut}from"../chunks/GjyCz3r7.js";import{e as h}from"../chunks/B6Pj8jan.js";import{i as ft}from"../chunks/BcrJJAe6.js";import{s as bt,a as T}from"../chunks/D-BB90hW.js";import{o as gt,w as ht}from"../chunks/D4BJqEd1.js";var xt=v('<div class="fixed inset-0 bg-black/30 z-40"><div class="fixed top-0 right-0 h-full w-64 bg-white text-black shadow-lg z-50 p-4 flex flex-col justify-between"><div><div class="flex justify-between items-center mb-4"><h2 class="text-lg font-bold">الصفحات</h2> <button class="text-black text-xl">×</button></div> <nav class="flex flex-col gap-2"><a href="/admin/responses" class="hover:underline">الردود</a> <span class="text-gray-400 cursor-not-allowed">الردود المقبولة</span> <a href="/admin/add_admin" class="hover:underline">اضافة مسؤول</a></nav></div> <button type="submit" class="bg-red-600 text-white px-4 py-2 rounded-lg mt-4 w-full">تسجيل الخروج</button></div></div>'),_t=v('<p class="text-center text-gray-500">لا توجد ردود.</p>'),wt=v('<p><strong>الموقع:</strong> <a target="_blank" class="text-blue-600 underline hover:text-blue-800"> </a></p>'),yt=v('<li class="bg-white border border-gray-200 rounded-xl shadow p-5"><p class="mb-1"><strong>الاسم:</strong> </p> <p class="mb-1"><strong>رقم الهاتف:</strong> </p> <!> <div class="mt-4"><button class="bg-black text-white px-4 py-2 rounded-md shadow hover:bg-gray-900 active:bg-gray-800 transition">تم الانتهاء</button></div></li>'),$t=v('<ul class="space-y-5 max-w-3xl mx-auto px-4"></ul>'),kt=v('<div class="fixed bottom-4 right-4 z-50"><div role="alert"><svg class="shrink-0 w-4 h-4 me-3" fill="currentColor" viewBox="0 0 20 20"><path d="M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"></path></svg> <div><span class="font-medium"> </span> </div></div></div>'),jt=v('<button class="text-black px-0 py-0 rounded mr-4 text-3xl">☰</button> <!> <h1 class="text-3xl font-bold text-center my-8">الردود الموافق عليها</h1> <!> <!>',1);function Dt(S,B){tt(B,!1);const[y,D]=bt(),J=()=>T(lt,"$page",y),z=()=>T($,"$approved",y),u=()=>T(it,"$alert",y);let x=rt(!1);function L(t,{duration:a=300}){return{duration:a,easing:ut,css:e=>`transform: translateX(${(1-e)*100}%);`}}function N(t){t.target===t.currentTarget&&j(x,!1)}const $=ht([]);gt(()=>{$.set(J().data.approved)});const P=t=>{$.update(a=>a.filter(e=>e.id!==t))},R=async t=>{try{const a=await fetch("/admin/approved_responses",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({responseId:t})}),e=await a.json();a.ok?(P(t),O(e.message,"success")):O(e.error,"error")}catch(a){console.error(a),O("حدث خطأ أثناء العملية","error")}};ft();var A=jt(),C=at(A),F=l(C,2);{var X=t=>{var a=xt(),e=o(a),r=o(e),i=o(r),c=l(o(i),2);s(i),st(2),s(r);var f=l(r,2);s(e),s(a),h("click",c,()=>j(x,!1)),h("click",f,function(...b){var _;(_=vt)==null||_.apply(this,b)}),pt(3,e,()=>L),h("click",a,N),d(t,a)};w(F,t=>{n(x)&&t(X)})}var Z=l(F,4);{var E=t=>{var a=_t();d(t,a)},G=t=>{var a=$t();nt(a,5,z,ct,(e,r)=>{var i=yt(),c=o(i),f=l(o(c));s(c);var b=l(c,2),_=l(o(b));s(b);var q=l(b,2);{var U=k=>{var p=wt(),m=l(o(p),2),W=o(m);s(m),s(p),M((Y,I)=>{dt(m,"href",`https://www.google.com/maps?q=${n(r).home.lat},${n(r).home.lon}`),g(W,`${Y??""}, ${I??""}`)},[()=>n(r).home.lat.toFixed(6),()=>n(r).home.lon.toFixed(6)],ot),d(k,p)};w(q,k=>{var p,m;(p=n(r).home)!=null&&p.lat&&((m=n(r).home)!=null&&m.lon)&&k(U)})}var H=l(q,2),V=o(H);s(H),s(i),M(()=>{g(f,` ${n(r).name??""}`),g(_,` ${n(r).phonenumber??""}`)}),h("click",V,()=>R(n(r).id)),d(e,i)}),s(a),d(t,a)};w(Z,t=>{z().length===0?t(E):t(G,!1)})}var K=l(Z,2);{var Q=t=>{var a=kt(),e=o(a),r=l(o(e),2),i=o(r),c=o(i,!0);s(i);var f=l(i);s(r),s(e),s(a),M(()=>{mt(e,1,`flex items-center p-4 text-sm rounded-lg shadow ${u().type==="success"?"text-green-800 bg-green-100":u().type==="error"?"text-red-800 bg-red-100":"text-blue-800 bg-blue-100"}`),g(c,u().type==="success"?"نجاح!":"خطأ!"),g(f,` ${u().message??""}`)}),d(t,a)};w(K,t=>{u().visible&&t(Q)})}h("click",C,()=>j(x,!0)),d(S,A),et(),D()}export{Dt as component};
